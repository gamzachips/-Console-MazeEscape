#pragma once
#include "pch.h"
#include "List.h"


class Player;
class Enemy;
class Item;
class AttackPoint;
class AttackStartPoint;

template <typename T>
class List;

class Maze
{
public:
	Maze();
	~Maze();
	void Init();
	void Update();
	void WriteMaze();

	void SetTiles();
	void SetTileType(Pos pos, TileType type);
	int GetTileType(Pos pos);
	void RemoveTile(Pos pos);
	Player* GetPlayer() { return _player; }

	//Attack
	void SetAttackStart(Pos pos); 
	void MakeAttackPoint(Pos pos);
	void MakeAttacks();

	bool CheckGameClear();
	bool CheckPlayerDead();
private:
	Player* _player = nullptr;
	List<Enemy*> _enemies;
	List<AttackPoint*> _attackPoints;
	AttackStartPoint* _attackStartPoint = nullptr;

	int _tiles[mazeSize][mazeSize]
	{
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
		{1,4,0,0,0,1,3,0,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,0,3,1,1},
		{1,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,5,1,0,1,1,1,1},
		{1,1,0,1,0,6,0,1,0,1,0,0,0,0,6,0,0,1,0,1,0,0,0,0,2,1,1},
		{1,1,0,1,1,1,0,1,5,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,0,1,1},
		{1,1,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,5,1,1},
		{1,1,1,1,1,1,1,1,1,1,0,1,5,1,1,1,1,1,1,1,0,1,0,1,0,1,1},
		{1,1,0,6,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1},
		{1,9,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1},
		{1,1,1,1,0,1,0,1,0,0,6,0,0,1,0,0,0,1,0,0,0,6,0,1,0,1,1},
		{1,1,3,1,0,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,0,0,1,1},
		{1,1,0,1,0,1,0,0,0,1,0,0,0,1,2,0,0,0,0,1,0,1,0,1,1,1,1},
		{1,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1,1},
		{1,1,5,1,0,1,0,1,0,0,0,0,6,0,0,0,0,0,0,0,0,1,0,1,0,1,1},
		{1,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,1},
		{1,1,0,0,0,1,0,1,2,0,0,0,6,0,0,0,0,1,0,1,0,1,0,1,0,1,1},
		{1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,0,1,5,1,0,1,0,1,0,1,1},
		{1,1,0,1,0,1,0,1,0,0,0,1,3,1,0,1,0,0,0,0,0,6,0,0,0,1,1},
		{1,1,0,1,0,1,0,1,1,1,5,1,0,1,0,1,0,1,1,1,1,1,1,1,0,1,1},
		{1,1,0,6,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,2,0,0,1,5,1,1},
		{1,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,1},
		{1,1,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,1,1},
		{1,1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1},
		{1,1,0,0,6,0,0,0,0,1,0,0,0,6,0,0,0,0,0,0,0,0,0,6,0,1,1},
		{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
		{ 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
	};

};

